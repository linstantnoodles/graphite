<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
       </head>
    <body>
        <section>
            <input type="text" name="wow">
        </section>
        <svg id="mysvg" width="1000px" height="1000px" xmlns="http://www.w3.org/2000/svg">
        </svg>
     <script>
            var SVGCreator = function (id) {
                this.svgElement = document.getElementById(id);
            };

            SVGCreator.prototype.circle = function (options) {
                // Set defaults
                var C = document.createElementNS("http://www.w3.org/2000/svg","circle");
                C.setAttributeNS(null,"r", 5);
                C.setAttributeNS(null,"cx", x);
                C.setAttributeNS(null,"cy", y);
                C.setAttributeNS(null,"stroke", "red");
                svgEl.appendChild(C);
            };
           
            // Logic belongs in thing
            SVGCreator.prototype.line = function (options) {
                // Set defaults
                var C= document.createElementNS("http://www.w3.org/2000/svg","line");
                C.setAttributeNS(null,"x1", origin.x);
                C.setAttributeNS(null,"y1", origin.y);
                C.setAttributeNS(null,"x2", origin.x + width);
                C.setAttributeNS(null,"y2", origin.y);
                C.setAttributeNS(null,"stroke", "black");
                C.setAttributeNS(null,"stroke-width", strokeWidth);
                svgEl.appendChild(C);
            };

            SVGCreator.prototype.path = function (options) {
                var C= document.createElementNS("http://www.w3.org/2000/svg","path");
                var initialPoint = points[0];
                var pathString = "M " + initialPoint.x + " " + initialPoint.y + " L ";
                for (var i = 1; i < points.length; i++) {
                    pathString += points[i].x + " " + points[i].y + " ";
                }
                C.setAttributeNS(null,"stroke", "red");
                C.setAttributeNS(null, "d", pathString);
                C.setAttributeNS(null, "fill", "none");
                svgEl.appendChild(C);
            };

            // Dot painter
            var svgEl = document.getElementById("mysvg");
            var canvas = new SVGCreator("mysvg");

            function drawCircle (x, y) {
                console.log(x);
                console.log(y);
                var C= document.createElementNS("http://www.w3.org/2000/svg","circle");
                C.setAttributeNS(null,"r", 5);
                C.setAttributeNS(null,"cx", x);
                C.setAttributeNS(null,"cy", y);
                C.setAttributeNS(null,"stroke", "red");
                svgEl.appendChild(C);
            }

            function drawLine (options) {
                var x1 = options.x1;
                var y1 = options.y1;
                var x2 = options.x2;
                var y2 = options.y2;
                var strokeWidth = options.stroke_width || 1;

                var C = document.createElementNS("http://www.w3.org/2000/svg","line");
                C.setAttributeNS(null,"x1", x1);
                C.setAttributeNS(null,"y1", y1);
                C.setAttributeNS(null,"x2", x2);
                C.setAttributeNS(null,"y2", y2);
                C.setAttributeNS(null,"stroke", "black");
                C.setAttributeNS(null,"stroke-width", strokeWidth);
                svgEl.appendChild(C);
            }

            function drawPath (points) {
                var C= document.createElementNS("http://www.w3.org/2000/svg","path");
                var initialPoint = points[0];
                var pathString = "M " + initialPoint.x + " " + initialPoint.y + " L ";
                for (var i = 1; i < points.length; i++) {
                    pathString += points[i].x + " " + points[i].y + " ";
                }
                C.setAttributeNS(null,"stroke", "red");
                C.setAttributeNS(null, "d", pathString);
                C.setAttributeNS(null, "fill", "none");
                svgEl.appendChild(C);
            }

            var Axis = function (config) {
                this.x = config.x;
                this.y = config.y;
                this.width = config.width;
                this.values = config.values || [];
                this.range = config.range;
            };

            // Distance between each value on the axis
            Axis.prototype.getIntervalWidth = function () {
                return Math.floor(this.width / (this.getMax() - this.getMin()));
            };

            // Since some may not evenly divide the max may not always be at the end
            // This is the actual width of the line
            Axis.prototype.getLineWidth = function () {
                return  this.width - (this.width - (this.getIntervalWidth() * (this.getMax() - this.getMin())));
            };

            Axis.prototype.getDistanceFromOrigin = function (value) {
                return (value - this.getMin()) * this.getIntervalWidth();
            };

            Axis.prototype.getMin = function () {
                return (this.range) ? this.range.min : Math.min.apply(null, this.values);
            };

            Axis.prototype.getMax = function () {
                return (this.range) ? this.range.max : Math.max.apply(null, this.values);
            };

            var XAxis = function (config) {
                Axis.call(this, config);
            };

            XAxis.prototype = Object.create(Axis.prototype);

            XAxis.prototype.draw = function (values) {
                values = values || [];
                drawLine({
                    x1: this.x, 
                    y1: this.y,
                    x2: this.x + this.getLineWidth(),
                    y2: this.y
                });
                for (var i = 0; i < values.length; i++) {
                    var value = this.values[i];
                    var pos = this.getValuePosition({x: this.x, y: this.y}, value);
                    drawCircle(pos.x, pos.y);
                }

            };

            XAxis.prototype.getValuePosition = function (origin, value) {
                var posX = origin.x + this.getDistanceFromOrigin(value);
                return {
                    x: posX,
                    y: origin.y
                };
            };

            var YAxis = function (config) {
                Axis.call(this, config);
            };

            YAxis.prototype = Object.create(Axis.prototype);

            YAxis.prototype.draw = function (values) {
                values = values || [];
                drawLine({
                    x1: this.x,
                    y1: this.y,
                    x2: this.x, 
                    y2: this.y + this.getLineWidth()
                });
                for (var i = 0; i < values.length; i++) {
                    var value = this.values[i];
                    var pos = this.getValuePosition({x: this.x, y: this.y}, value);
                    drawCircle(pos.x, pos.y);
                }
            };

            YAxis.prototype.getValuePosition = function (origin, value) {
                var posY = (origin.y + this.getLineWidth()) - this.getDistanceFromOrigin(value);
                return {x: origin.x, y: posY};
            };

            var CartesianCoordinate = function (config) {
                this.x = config.x;
                this.y = config.y;
                this.xWidth = config.x_width;
                this.yWidth = config.y_width;
                this.xRange = config.x_range;
                this.yRange = config.y_range;
                this.origin = config.origin;
                this.xAxis = new XAxis({
                    width: this.xWidth, 
                    range: this.xRange
                });
                this.yAxis = new YAxis({
                    width: this.yWidth,
                    range: this.yRange
                });
                this.yAxis.x = this.xAxis.getValuePosition({
                    x: this.x, 
                    y: this.y
                }, this.origin.x).x;
                this.yAxis.y = this.y;
                this.xAxis.x = this.x;
                this.xAxis.y = this.yAxis.getValuePosition({
                    x: this.x, 
                    y: this.y
                }, this.origin.y).y;
            };

            CartesianCoordinate.prototype.drawGrid = function () {
                var yMin = this.yAxis.getMin();
                var yMax = this.yAxis.getMax();
                for (var i = yMin; i <= yMax; i++) {
                    var y = this.yAxis.getValuePosition({
                        x: this.x, 
                        y: this.y
                    }, i).y;
                    drawLine({
                        x1: this.x,
                        y1: y,
                        x2: this.x + this.xAxis.getLineWidth(),
                        y2: y,
                        stroke_width: 0.5
                    });
                }
                var xMin = this.xAxis.getMin();
                var xMax = this.xAxis.getMax();
                for (var i = xMin; i <= xMax; i++) {
                    var x = this.xAxis.getValuePosition({
                        x: this.x, 
                        y: this.y
                    }, i).x;
                    drawLine({
                        x1: x,
                        y1: this.y,
                        x2: x,
                        y2: this.y + this.yAxis.getLineWidth(),
                        stroke_width: 0.5
                    });
                }
            };

            CartesianCoordinate.prototype.draw = function (points) {
                this.xAxis.draw();
                this.yAxis.draw();
                this.drawGrid();
                this.drawPath(points);
            }

            CartesianCoordinate.prototype.drawPoints = function (points) {
                for (var i = 0; i < points.length; i++) {
                    var point = points[i];
                    var xPos = this.xAxis.getValuePosition({x: this.x, y: this.y}, point.x).x;
                    var yPos = this.yAxis.getValuePosition({x: this.x, y: this.y}, point.y).y;
                    drawCircle(xPos, yPos);
                }

            };

            CartesianCoordinate.prototype.drawPath = function (points) {
                var coordinates = [];
                for (var i = 0; i < points.length; i++) {
                    var point = points[i];
                    var xPos = this.xAxis.getValuePosition({x: this.x, y: this.y}, point.x).x;
                    var yPos = this.yAxis.getValuePosition({x: this.x, y: this.y}, point.y).y;
                    coordinates.push({x: xPos, y: yPos});
                }
                drawPath(coordinates);
            }; 

            var cartesianConfig = {
                x: 10,
                y: 10,
                x_width: 300,
                y_width: 300,
                x_range: {min: -5, max: 5},
                y_range: {min: -5, max: 5},
                origin: {x: 0, y: 0}
            };

            var x = new CartesianCoordinate(cartesianConfig);

            x.draw([
                {x: 1, y: 2},
                {x: 2, y: 2.5}, 
                {x: 3, y: 3},
                {x: 4, y: 5}
            ]);
        </script>
    </body>
</html>
        
